/*
 * Copyright 2009-2014 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//***MULTI-PART
//*******************
//LOGICAL-PATH:aria/tools/common/ObjectTreeDisplay.tpl
//*******************
Aria.classDefinition({$classpath:"aria.tools.common.ObjectTreeDisplay",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$ObjectTreeDisplayScript.constructor.call(this)},$destructor:function(){this.$ObjectTreeDisplayScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","aria.tools.common.ObjectTreeDisplayScript","aria.utils.String","aria.widgets.Icon","aria.core.TplClassLoader"],$prototype:{macro_main:function(){try{with(this)this.__$write('\n<table cellpadding="0" cellspacing="0">\n',10),this.macro_displayElement(data.content,data.title,0),this.__$write("\n</table>\n",12)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},macro_displayElement:function(element,name,depth){try{with(this)if(this.__$write('\n\n\n<tr>\n\n<td style="padding-left:',16),this.__$write(this.$modifier("escapeforhtml",[20*depth]),20),this.__$write('px; padding-right:10px;">\n\n',20),element&&!element.$classpath&&(typeUtils.isArray(element)||typeUtils.isObject(element))?element["view:ariaDebug:showOpen"+depth]?(this.__$write('\n<span style="cursor:pointer;" ',24),this.__$statementOnEvent("click",this.$normCallback({fn:nodeClick,args:{element:element,depth:depth}}),24),this.__$write(">",24),this.__$processWidgetMarkup("aria.widgets.AriaLib","Icon",{icon:"std:collapse"},24),this.__$write(" ",24),this.macro_displayName(name),this.__$write("</span>\n",24)):(this.__$write('\n<span style="cursor:pointer;" ',26),this.__$statementOnEvent("click",this.$normCallback({fn:nodeClick,args:{element:element,depth:depth}}),26),this.__$write(">",26),this.__$processWidgetMarkup("aria.widgets.AriaLib","Icon",{icon:"std:expand"},26),this.__$write(" ",26),this.macro_displayName(name),this.__$write("</span>\n",26)):(this.__$write('\n<span style="padding-left:16px">&nbsp;',29),this.macro_displayName(name),this.__$write("</span>\n",29)),this.__$write('\n</td>\n\n\n<td style="vertical-align: top;">\n',31),typeUtils.isArray(element)?(this.__$write('\n<span style="color:orange; cursor:pointer;" ',36),this.__$statementOnEvent("click",this.$normCallback({fn:nodeClick,args:{element:element,depth:depth}}),36),this.__$write(">Array [",36),this.__$write(this.$modifier("escapeforhtml",[element.length]),36),this.__$write("]</span>\n",36)):typeUtils.isObject(element)?(this.__$write('\n<span style="color:orange; cursor:pointer;" ',38),this.__$statementOnEvent("click",this.$normCallback({fn:nodeClick,args:{element:element,depth:depth}}),38),this.__$write(">Object</span>\n",38)):null===element?this.__$write("\n<em>null</em>\n",40):"undefined"==typeof element?this.__$write("\n<em>undefined</em>\n",42):typeUtils.isString(element)?(this.__$write('\n<span style="color:red">"',44),this.__$write(this.$modifier("escapeforhtml",[element]),44),this.__$write('"</span>\n',44)):element===!0?this.__$write('\n<span style="color:purple">true</span>\n',46):element===!1?this.__$write('\n<span style="color:purple">false</span>\n',48):typeUtils.isNumber(element)?(this.__$write('\n<span style="color:blue">',50),this.__$write(this.$modifier("escapeforhtml",[element]),50),this.__$write("</span>\n",50)):element.$classpath?this.__$write(this.$modifier("escapeforhtml",[element.$classpath]),52):(this.__$write('\n<span style="color:green">',54),this.__$write(this.$modifier("escapeforhtml",[typeof element]),54),this.__$write("</span>\n",54)),this.__$write("\n</td>\n</tr>\n",56),element&&element["view:ariaDebug:showOpen"+depth]){var types=filterTypes(element);this.macro_displaySubElement(element,types.data,depth+1),this.macro_displaySubElement(element,types.meta,depth+1)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayElement",this["aria:currentLineNumber"]],_ex)}},macro_displaySubElement:function(element,types,depth){try{with(this){var __v_1=types.booleans;void 0==types.booleans&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",67]);for(var key_ct=0,__v_2=__v_1.length,key_index=0;__v_2>key_index;key_index++){var key=__v_1[key_index];key_ct++,this.macro_displayElement(element[key],key,depth)}var __v_3=types.strings;void 0==types.strings&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",70]);for(var key_ct=0,__v_4=__v_3.length,key_index=0;__v_4>key_index;key_index++){var key=__v_3[key_index];key_ct++,this.macro_displayElement(element[key],key,depth)}var __v_5=types.numbers;void 0==types.numbers&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",73]);for(var key_ct=0,__v_6=__v_5.length,key_index=0;__v_6>key_index;key_index++){var key=__v_5[key_index];key_ct++,this.macro_displayElement(element[key],key,depth)}var __v_7=types.instances;void 0==types.instances&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",76]);for(var key_ct=0,__v_8=__v_7.length,key_index=0;__v_8>key_index;key_index++){var key=__v_7[key_index];key_ct++,this.macro_displayElement(element[key],key,depth)}var __v_9=types.others;void 0==types.others&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",79]);for(var key_ct=0,__v_10=__v_9.length,key_index=0;__v_10>key_index;key_index++){var key=__v_9[key_index];key_ct++,this.macro_displayElement(element[key],key,depth)}var __v_11=types.arrays;void 0==types.arrays&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",82]);for(var key_ct=0,__v_12=__v_11.length,key_index=0;__v_12>key_index;key_index++){var key=__v_11[key_index];key_ct++,this.macro_displayElement(element[key],key,depth)}var __v_13=types.objects;void 0==types.objects&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",85]);for(var key_ct=0,__v_14=__v_13.length,key_index=0;__v_14>key_index;key_index++){var key=__v_13[key_index];key_ct++,this.macro_displayElement(element[key],key,depth)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySubElement",this["aria:currentLineNumber"]],_ex)}},macro_displayName:function(name){try{with(this)-1!=name.indexOf(":")?(this.__$write('\n<span style="color:grey">',93),this.__$write(this.$modifier("escapeforhtml",[name]),93),this.__$write("</span>\n",93)):this.__$write(this.$modifier("escapeforhtml",[name]),95)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayName",this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(aria.tools.common.ObjectTreeDisplayScript,e)},__$initTemplate:function(){try{with(this)this.typeUtils=aria.utils.Type}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:aria/tools/common/ObjectTreeDisplayScript.js
//*******************
var e=require("../../Aria"),t=require("../../utils/Type");module.exports=e.tplScriptDefinition({$classpath:"aria.tools.common.ObjectTreeDisplayScript",$prototype:{$dataReady:function(){this.data.showDepth&&this._showDepth(this.data.content,this.data.showDepth,0)},_showDepth:function(e,t,i){if(e&&t>i){e["view:ariaDebug:showOpen"+i]=!0;for(var r in e)e.hasOwnProperty(r)&&this._showDepth(e[r],t,i+1)}},nodeClick:function(e,t){var i=t.element,r=t.depth,s="view:ariaDebug:showOpen"+r;i[s]=i[s]?!1:!0,this.$refresh()},filterTypes:function(e){var i={meta:{arrays:[],objects:[],strings:[],numbers:[],instances:[],booleans:[],others:[]},data:{arrays:[],objects:[],strings:[],numbers:[],instances:[],booleans:[],others:[]}},r=t;for(var s in e)if(e.hasOwnProperty(s)&&!this.$json.isMetadata(s)&&0!==s.indexOf("view:ariaDebug:showOpen")){var a,n=e[s];a=-1==s.indexOf(":")?i.data:i.meta,a=r.isArray(n)?a.arrays:r.isObject(n)?a.objects:r.isString(n)?a.strings:r.isNumber(n)?a.numbers:r.isBoolean(n)?a.booleans:n&&n.$classpath?a.instances:a.others,a.push(s)}return i}}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/IInspectorModule.js
//*******************
var e=require("../../Aria"),t=require("../../templates/IModuleCtrl");module.exports=e.interfaceDefinition({$classpath:"aria.tools.inspector.IInspectorModule",$extends:t,$interface:{displayHighlight:function(){},reloadTemplate:function(){},refreshTemplate:function(){},reloadModule:function(){},getSource:function(){}},$events:{contentChanged:""}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/InspectorDisplay.tpl
//*******************
Aria.classDefinition({$classpath:"aria.tools.inspector.InspectorDisplay",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$InspectorDisplayScript.constructor.call(this)},$destructor:function(){this.$InspectorDisplayScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","aria.tools.inspector.InspectorDisplayScript","aria.widgets.container.Dialog","aria.utils.String","aria.widgets.Template","aria.widgets.Icon","aria.core.TplClassLoader"],$prototype:{macro_main:function(){try{with(this)this.__$processWidgetMarkup("aria.widgets.AriaLib","Dialog",{macro:"showLock",modal:!0,closable:!1,bind:{visible:{to:"locked",inside:data}}},11),this.__$write('\n\n<div style="float:left;width:',22),this.__$write(this.$modifier("escapeforhtml",[$hdim(380,.5)]),23),this.__$write('px;margin:5px;">\n<h2 style="color:#99CC00;margin-bottom:0px;">Templates</h2>\n<div style="border:solid 1px #888;padding:5px;width:',23),this.__$write(this.$modifier("escapeforhtml",[$hdim(368,.5)]),25),this.__$write('px;overflow:auto;">\n\n<em style="color:lightGrey">List of templates displayed in the application. Mouse over to highlight and show associated module, click to display details.</em>\n',25),this.__$insertSection(28,{id:"templates",macro:"displayTemplates"}),this.__$write("\n</div>\n\n",29),data.selectedTemplate&&(this.__$write('\n<div  style="border:solid 1px #888;padding:5px;margin-top:5px;">\n',32),this.__$processWidgetMarkup("aria.widgets.AriaLib","Template",{defaultTemplate:"aria.tools.inspector.TemplateInspector",data:data.selectedTemplate,width:$hdim(368,.5)},33),this.__$write("\n</div>\n",38)),this.__$write('\n\n</div>\n\n<div style="float:left;width:',40),this.__$write(this.$modifier("escapeforhtml",[$hdim(380,.5)]),43),this.__$write('px; margin:5px;overflow:auto;">\n<h2 style="color:#CC0099;margin-bottom:0px;">Module Controllers & Data</h2>\n<div  style="border:solid 1px #888;padding:5px;width:',43),this.__$write(this.$modifier("escapeforhtml",[$hdim(368,.5)]),45),this.__$write('px;overflow:auto;">\n\n<em style="color:lightGrey">List of module controllers associated to templates in the application. Mouse over to highlight associated template, click to display details.</em>\n',45),this.__$insertSection(48,{id:"modules",macro:"displayModules"}),this.__$write("\n</div>\n\n",49),data.selectedModule&&(this.__$write('\n<div  style="border:solid 1px #888;padding:5px;margin-top:5px;">\n',52),this.__$processWidgetMarkup("aria.widgets.AriaLib","Template",{defaultTemplate:"aria.tools.inspector.ModuleInspector",data:this.data.selectedModule,width:$hdim(368,.5)},53),this.__$write("\n</div>\n",58)),this.__$write("\n\n</div>\n\n",60)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},macro_showLock:function(){try{with(this)this.__$write('\n<div style="padding:10px">\n',66),this.__$processWidgetMarkup("aria.widgets.AriaLib","Icon",{icon:"std:warning"},67),this.__$write(" Operation in progress ...\n</div>\n",67)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showLock",this["aria:currentLineNumber"]],_ex)}},macro_displayTemplates:function(templates){try{with(this)this.macro_recDisplayTemplates(data.templates)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTemplates",this["aria:currentLineNumber"]],_ex)}},macro_recDisplayTemplates:function(templates){try{with(this){this.__$write("\n<ul>\n",76);for(var i=0;i<templates.length;i++){var template=templates[i],templateCtxt=template.templateCtxt;this.__$write("\n<li ",80),this.__$statementOnEvent("mouseover",this.$normCallback({fn:tplMouseOver,args:template}),80),this.__$statementOnEvent("mouseout",this.$normCallback({fn:tplMouseOut}),81),this.__$statementOnEvent("click",this.$normCallback({fn:selectTemplate,args:template}),82),data.overTemplates&&aria.utils.Array.contains(data.overTemplates,templateCtxt)&&this.__$write("style='background:#DDDDDD;'",83),this.__$write(">\n",83),data.selectedTemplate&&data.selectedTemplate.templateCtxt==templateCtxt&&this.__$write("<strong>",84),this.__$write(this.$modifier("escapeforhtml",[templateCtxt.tplClasspath]),85),data.selectedTemplate&&data.selectedTemplate.templateCtxt==templateCtxt&&this.__$write("</strong>",86),template.content.length>0&&this.macro_recDisplayTemplates(template.content),this.__$write("\n</li>\n",90)}this.__$write("\n</ul>\n",92)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["recDisplayTemplates",this["aria:currentLineNumber"]],_ex)}},macro_displayModules:function(){try{with(this){this.__$write("\n<ul>\n",96);for(var modules=data.modules,i=0;i<modules.length;i++){var module=modules[i];this.__$write("\n<li ",100),this.__$statementOnEvent("mouseover",this.$normCallback({fn:moduleMouseOver,args:module}),100),this.__$statementOnEvent("mouseout",this.$normCallback({fn:moduleMouseOut}),101),this.__$statementOnEvent("click",this.$normCallback({fn:selectModule,args:module}),102),module.moduleCtrl==data.overModuleCtrl&&this.__$write("style='background:#DDDDDD;'",103),this.__$write(" />\n",103),data.selectedModule&&data.selectedModule.moduleCtrl==module.moduleCtrl&&this.__$write("<strong>",104),this.__$write(this.$modifier("escapeforhtml",[module.moduleCtrl.$classpath]),105),data.selectedModule&&data.selectedModule.moduleCtrl==module.moduleCtrl&&this.__$write("</strong>",106),this.__$write("\n</li>\n",107)}this.__$write("\n</ul>\n",109)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayModules",this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={min:800},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(aria.tools.inspector.InspectorDisplayScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/InspectorDisplayScript.js
//*******************
var e=require("../../Aria");module.exports=e.tplScriptDefinition({$classpath:"aria.tools.inspector.InspectorDisplayScript",$prototype:{tplMouseOver:function(e,t){this.moduleCtrl.displayHighlight(t.templateCtxt.getContainerDiv()),this.data.overModuleCtrl=t.moduleCtrl,this.mouseOver(e),this._refreshModulesDisplay(),e.stopPropagation()},tplMouseOut:function(e){this.data.overModuleCtrl=null,this.mouseOut(e),this._refreshModulesDisplay(),e.stopPropagation()},moduleMouseOver:function(e,t){this.data.overTemplates=t.outerTemplateCtxts,this.mouseOver(e),this._refreshTemplatesDisplay(),e.stopPropagation()},moduleMouseOut:function(e){this.data.overTemplates=null,this.mouseOut(e),this._refreshTemplatesDisplay(),e.stopPropagation()},mouseOver:function(e){e.target.setStyle("background:#DDDDDD;")},mouseOut:function(e){e.target.setStyle("")},selectTemplate:function(e,t){this.data.selectedTemplate=t,this.$refresh()},selectModule:function(e,t){this.data.selectedModule=t,this.$refresh()},reloadTemplate:function(e,t){this.moduleCtrl.reloadTemplate(t.templateCtxt)},refreshTemplate:function(e,t){this.moduleCtrl.refreshTemplate(t.templateCtxt)},onModuleEvent:function(e){"contentChanged"==e.name&&this.$refresh()},_refreshModulesDisplay:function(){this.$refresh({section:"modules"})},_refreshTemplatesDisplay:function(){this.$refresh({section:"templates"})}}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/InspectorModule.js
//*******************
var e=require("../../Aria");require("../../utils/Event"),require("../../utils/Dom");var t=require("../../utils/Json");require("./InspectorDisplay.tpl");var i=require("./IInspectorModule"),r=require("../../templates/ModuleCtrl");module.exports=e.classDefinition({$classpath:"aria.tools.inspector.InspectorModule",$extends:r,$implements:[i],$constructor:function(){this.$ModuleCtrl.constructor.call(this),this.bridge=null,this._data={templates:[],modules:[],dataFragments:[],selectedTemplate:null,selectedModule:null,locked:!1},this._holder=null,this._hideTimeout=null,this._mainContextual=null,this._replaceHtmlOriginal=null},$destructor:function(){this.clearHightlight();var e=this.bridge.getAriaPackage().utils.Dom;e.replaceHTML=this._replaceHtmlOriginal,this._replaceHtmlOriginal=null,e.insertAdjacentHTML=this._insertAdjacentHtmlOriginal,this._insertAdjacentHtmlOriginal=null,e.removeElement=this._removeElementOriginal,this._removeElementOriginal=null,this.$ModuleCtrl.$destructor.call(this)},$prototype:{$publicInterfaceName:"aria.tools.inspector.IInspectorModule",init:function(t){this.bridge=t.bridge,this.$assert(77,!!this.bridge);var i=this.bridge.getAriaPackage().utils.Dom;this._replaceHtmlOriginal=i.replaceHTML,i.replaceHTML=this._interceptMethod(this._replaceHtmlOriginal),this._insertAdjacentHtmlOriginal=i.insertAdjacentHTML,i.insertAdjacentHTML=this._interceptMethod(this._insertAdjacentHtmlOriginal),this._removeElementOriginal=i.removeElement,i.removeElement=this._interceptMethod(this._removeElementOriginal),this.bridge.$on({forwardEvent:this._onForward,scope:this});var r=this.bridge.getDocument();this._holder=r.createElement("div"),r.body.appendChild(this._holder),this.refreshInformations(),this._mainContextual=e.nspace("tools.contextual.ContextualMenu",!1,this.bridge.getAriaPackage()),this._mainContextual&&this._mainContextual.targetTemplateCtxt&&this._selectFromTemplateCtxt(this._mainContextual.targetTemplateCtxt),this.$ModuleCtrl.init.apply(this,arguments)},_interceptMethod:function(e){var t=this,i=function(){try{t.refreshInformations()}catch(e){}};return function(t,r,s){var a=e.call(this,t,r,s);return setTimeout(i),a}},refreshInformations:function(){this._data.templates=[],this._data.modules=[],this._data.dataFragments=[];var e=this._data.templates,t=this._data.modules,i=this._data.dataFragments,r=this._data.selectedTemplate,s=this._data.selectedModule,a=this.bridge.getAriaPackage().templates.RefreshManager;if(null!=a){a.updateHierarchies();var n=a.getHierarchies();this._convertRefreshMgrHierarchies(n,e,t,i)}r==this._data.selectedTemplate&&(this._data.selectedTemplate=null),s==this._data.selectedModule&&(this._data.selectedModule=null),this.$raiseEvent("contentChanged")},_convertRefreshMgrHierarchies:function(e,t,i,r,s){for(var a=0,n=e.length;n>a;a++)this._convertRefreshMgrHierarchy(e[a],t,i,r,s)},_convertRefreshMgrHierarchy:function(e,t,i,r,s){if("template"==e.type||"templateWidget"==e.type){var a=e.elem;"templateWidget"==e.type&&(a=a.behavior?a.behavior.subTplCtxt:a.subTplCtxt);var n,o=this._data.selectedTemplate,l=this._data.selectedModule,c=[],h=[],u=!1,p=this.bridge.getAriaPackage().templates.ModuleCtrlFactory;this.$assert(190,!!a),this.$assert(191,!!p);var d=a.moduleCtrl;if(d){for(var _=0,g=i.length;g>_;_++)n=i[_],n.moduleCtrl==d?(n.current||(n.outerTemplateCtxts.push(a),n.current=!0),u=!0):n.current=!1;if(!u){var m={moduleCtrl:d,outerTemplateCtxts:[a],current:!0,isReloadable:p.isModuleCtrlReloadable(d)};l&&l.moduleCtrl==d&&(this._data.selectedModule=m),i.push(m)}}var f={templateCtxt:a,content:c,moduleCtrl:d,widgets:h};o&&o.templateCtxt==a&&(this._data.selectedTemplate=f),t.push(f),s=h,t=c}else if("widget"==e.type){var $=e.elem.behavior;if(s&&$){var y={widget:$};if(s.push(y),e.content){var v=[];y.content=v,s=v}}}e.content&&this._convertRefreshMgrHierarchies(e.content,t,i,r,s)},clearHightlight:function(){this._hideTimeout&&(clearInterval(this._hideTimeout),this._hideTimeout=null),this._holder.innerHTML=""},displayHighlight:function(e,t){this.clearHightlight(),t=t?t:"#ACC2FF";var i=this.bridge.getAriaPackage().utils.Dom.calculatePosition(e),r=this.bridge.getDocument().createElement("div");r.style.cssText=["position:absolute;top:",i.top,"px;left:",i.left,"px;width:",e.offsetWidth-8>0?e.offsetWidth-8:0,"px;height:",e.offsetHeight-8>0?e.offsetHeight-8:0,"px; border:dashed 4px "+t+";z-index: 999999999999999;z-index: 999999999999999;"].join(""),this._holder.appendChild(r),r=null,this._hideTimeout=setTimeout(aria.utils.Function.bind(this.clearHightlight,this),2e3)},reloadTemplate:function(e,i){t.setValue(this._data,"locked",!0),i&&(i=this._data.selectedTemplate.tplSrcEdit),this.clearHightlight(),this._mainContextual&&e.tplClasspath!=this._mainContextual.CONTEXTUAL_TEMPLATE_CLASSPATH&&this._mainContextual.close();var r=this,s=function(){e.$reload(i,{fn:r._unlock,scope:r})};s()},_unlock:function(){var e=this._data;setTimeout(function(){t.setValue(e,"locked",!1)},500)},reloadModule:function(e){var i=this.bridge.getAriaPackage().templates.ModuleCtrlFactory;t.setValue(this._data,"locked",!0),this.clearHightlight(),i.reloadModuleCtrl(e,{fn:this._unlock,scope:this})},refreshTemplate:function(e){this.clearHightlight(),e.$refresh()},_onForward:function(e){if("ContextualTargetFound"==e.event.name){var t=e.event.templateCtxt;this._selectFromTemplateCtxt(t)}},_selectFromTemplateCtxt:function(e){var t,i,r=e.moduleCtrlPrivate,s=this._data.modules;for(t=0,i=s.length;i>t;t++){if(s[t].moduleCtrl==r){this._data.selectedModule=s[t];break}this._data.selectedModule=null}this._data.selectedTemplate=this._findTemplateDes(this._data.templates,e)},_findTemplateDes:function(e,t){var i,r,s=null;for(i=0,r=e.length;r>i;i++){var a=e[i];if(a.templateCtxt==t)return a;if(s=this._findTemplateDes(a.content,t))return s}return null},getSource:function(e){return this.bridge.getAriaPackage().core.Cache.getItem("files",e,!1)}}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/ModuleInspector.tpl
//*******************
Aria.classDefinition({$classpath:"aria.tools.inspector.ModuleInspector",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$ModuleInspectorScript.constructor.call(this)},$destructor:function(){this.$ModuleInspectorScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","aria.tools.inspector.ModuleInspectorScript","aria.utils.String","aria.widgets.Template","aria.widgets.action.Button","aria.core.TplClassLoader"],$prototype:{macro_main:function(){try{with(this){var localModuleCtrl=data.moduleCtrl;this.__$write("\n\n<h3>",12),this.__$write(this.$modifier("escapeforhtml",[localModuleCtrl.$classpath]),13),this.__$write("</h3>\n\n<div>\n",13),this.__$insertSection(16,{id:"controls",macro:"displayControls"}),this.__$write("\n</div>\n\n<h4>General Information</h4>\n<ul>\n<li>Classpath: ",17),this.__$write(this.$modifier("escapeforhtml",[localModuleCtrl.$classpath]),21),this.__$write("</li>\n",21),localModuleCtrl._dataBeanName&&(this.__$write("\n<li>Data bean definition: ",23),this.__$write(this.$modifier("escapeforhtml",[localModuleCtrl._dataBeanName]),23),this.__$write("</li>\n",23)),this.__$write("\n<li>Interface: ",25),this.__$write(this.$modifier("escapeforhtml",[localModuleCtrl.$publicInterfaceName]),25),this.__$write("</li>\n</ul>\n<h4>Data</h4>\n",25),this.__$processWidgetMarkup("aria.widgets.AriaLib","Template",{defaultTemplate:"aria.tools.common.ObjectTreeDisplay",data:{content:localModuleCtrl.getData(),title:"data",showDepth:2,search:!0},width:$hdim(100,1)},28)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},macro_displayControls:function(){try{with(this)data.isReloadable&&(this.__$write('\n<div style="text-align:center; padding:5px; background:#F3F3F3; border:solid 1px #DDDDDD;">\n',42),this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Reload",onclick:{fn:reloadModule}},43),this.__$write("\n</div>\n",44))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayControls",this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={min:100},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(aria.tools.inspector.ModuleInspectorScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/ModuleInspectorScript.js
//*******************
var e=require("../../Aria");module.exports=e.tplScriptDefinition({$classpath:"aria.tools.inspector.ModuleInspectorScript",$prototype:{$dataReady:function(){this.data["view:dataDepth"]||(this.data["view:dataDepth"]=3)},reloadModule:function(){this.moduleCtrl.reloadModule(this.data.moduleCtrl)},onModuleEvent:function(){}}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/TemplateInspector.tpl
//*******************
Aria.classDefinition({$classpath:"aria.tools.inspector.TemplateInspector",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$TemplateInspectorScript.constructor.call(this)},$destructor:function(){this.$TemplateInspectorScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","aria.tools.inspector.TemplateInspectorScript","aria.utils.String","aria.widgets.Icon","aria.widgets.Template","aria.widgets.action.Button","aria.core.TplClassLoader"],$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n<h3>",10),this.__$write(this.$modifier("escapeforhtml",[data.templateCtxt.tplClasspath]),11),this.__$write("</h3>\n\n<div>\n",11),this.__$insertSection(14,{id:"controls",macro:"displayControls"}),this.__$write("\n</div>\n\n<h4>General Information</h4>\n\n",15),data.showSource?(this.__$write("\n<p ",20),this.__$statementOnEvent("click",this.$normCallback({fn:toggleSource}),20),this.__$write(' style="cursor:pointer;">',20),this.__$processWidgetMarkup("aria.widgets.AriaLib","Icon",{icon:"std:collapse"},20),this.__$write(" Source code</p>\n<textarea id='aria.tools.inspector.TemplateInspector_Src' style='width:",20),this.__$write(this.$modifier("escapeforhtml",[$hdim(96,1)]),21),this.__$write('px;font-family: "courier New", courier, monospace; height:250px;\' ',21),this.__$statementOnEvent("keyup",this.$normCallback({fn:this.editSource}),21),this.__$write(">\n",21),this.__$write(this.$modifier("escapeForHTML",[data.source]),22),this.__$write("\n</textarea>\n",23)):(this.__$write("\n<p ",25),this.__$statementOnEvent("click",this.$normCallback({fn:toggleSource}),25),this.__$write(' style="cursor:pointer;">',25),this.__$processWidgetMarkup("aria.widgets.AriaLib","Icon",{icon:"std:expand"},25),this.__$write(" Source code</p>\n",25)),this.__$write("\n\n<h4>Widgets</h4>\n\n",27),this.__$insertSection(30,{id:"widgets",macro:"widgetsContent"})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},macro_widgetsContent:function(){try{with(this)data.selectedWidget?(this.__$write('\n<div style="border: solid 1px #DDDDDD;padding:5px;width:',36),this.__$write(this.$modifier("escapeforhtml",[$hdim(88,1)]),36),this.__$write('px;overflow:auto;">\n',36),this.__$processWidgetMarkup("aria.widgets.AriaLib","Template",{defaultTemplate:"aria.tools.common.ObjectTreeDisplay",data:{content:data.selectedWidget.widget._cfg,title:"Configuration",showDepth:2,search:!0}},37),this.__$write("\n</div>\n",46)):this.__$write('\n<em style="color:lightGrey">Click to display configuration details</em>\n',48),this.macro_displayWidgets(data.widgets)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["widgetsContent",this["aria:currentLineNumber"]],_ex)}},macro_displayWidgets:function(container){try{with(this){this.__$write("\n<ul>\n",54);var __v_1=container;void 0==container&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",55]);for(var widgetDesc_ct=0,__v_2=__v_1.length,widgetDesc_index=0;__v_2>widgetDesc_index;widgetDesc_index++){var widgetDesc=__v_1[widgetDesc_index];widgetDesc_ct++,this.__$write("\n<li ",56),this.__$statementOnEvent("mouseover",this.$normCallback({fn:widgetMouseOver,args:widgetDesc}),56),this.__$statementOnEvent("mouseout",this.$normCallback({fn:widgetMouseOut}),57),this.__$write(">\n<span ",57),this.__$statementOnEvent("click",this.$normCallback({fn:displayWidgetDetails,args:widgetDesc}),58),this.__$write(">\n",58),data.selectedWidget==widgetDesc&&this.__$write("<strong>",59),this.__$write(this.$modifier("escapeforhtml",[widgetDesc.widget.$classpath]),60),data.selectedWidget==widgetDesc&&this.__$write("</strong>",61),this.__$write("\n</span>\n",62),widgetDesc.content&&this.macro_displayWidgets(widgetDesc.content),this.__$write("\n</li>\n",66)}this.__$write("\n</ul>\n",68)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayWidgets",this["aria:currentLineNumber"]],_ex)}},macro_displayControls:function(){try{with(this)this.__$write('\n<div style="text-align:center; padding:5px; background:#F3F3F3; border:solid 1px #DDDDDD;">\n',72),this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Reload",onclick:{fn:reloadTemplate}},73),this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Refresh",onclick:{fn:refreshTemplate}},74),data.showSource&&!data.initialSource&&(this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Reload with Source",onclick:{fn:reloadTemplateWithSrc}},76),this.__$write('\n</div>\n<div style="text-align:center;color:red;">',77),this.__$processWidgetMarkup("aria.widgets.AriaLib","Icon",{icon:"std:warning"},78),this.__$write(" &nbsp;&nbsp; Changes done here ARE NOT PERSISTENT. Use for testing only.\n",78)),this.__$write("\n</div>\n",80)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayControls",this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={min:100},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(aria.tools.inspector.TemplateInspectorScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:aria/tools/inspector/TemplateInspectorScript.js
//*******************
var e=require("../../Aria"),t=require("../../utils/Json");module.exports=e.tplScriptDefinition({$classpath:"aria.tools.inspector.TemplateInspectorScript",$prototype:{widgetMouseOver:function(e,t){var i=t.widget,r=i.getDom();r&&this.moduleCtrl.displayHighlight(r,"#FF6666"),this.mouseOver(e),e.stopPropagation()},widgetMouseOut:function(e){this.mouseOut(e),e.stopPropagation()},mouseOver:function(e){e.target.setStyle("background:#DDDDDD;")},mouseOut:function(e){e.target.setStyle("")},displayWidgetDetails:function(e,t){this.data.selectedWidget=t,this.$refresh({section:"widgets"})},reloadTemplate:function(){this.moduleCtrl.reloadTemplate(this.data.templateCtxt)},reloadTemplateWithSrc:function(){this.moduleCtrl.reloadTemplate(this.data.templateCtxt,!0)},refreshTemplate:function(){this.moduleCtrl.refreshTemplate(this.data.templateCtxt)},onModuleEvent:function(){},toggleSource:function(){if(this.data.showSource=!this.data.showSource,this.data.showSource){this.data.initialSource=!0;var e=this.data.templateCtxt.tplClasspath.replace(/\./g,"/")+".tpl";this.data.source=this.moduleCtrl.getSource(e).value}this.$refresh()},editSource:function(e){this.data.initialSource&&(t.setValue(this.data,"initialSource",!1),this.$refresh({section:"controls"})),this.data.tplSrcEdit=e.target.getValue()},_refreshWidgetsDisplay:function(){this.$refresh({section:"widgets"})}}});
//*******************
//LOGICAL-PATH:aria/tools/logger/ILoggerModule.js
//*******************
var e=require("../../Aria"),t=require("../../templates/IModuleCtrl");module.exports=e.interfaceDefinition({$classpath:"aria.tools.logger.ILoggerModule",$extends:t,$interface:{clean:function(){}},$events:{newLog:""}});
//*******************
//LOGICAL-PATH:aria/tools/logger/LoggerDisplay.tpl
//*******************
Aria.classDefinition({$classpath:"aria.tools.logger.LoggerDisplay",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$LoggerDisplayScript.constructor.call(this)},$destructor:function(){this.$LoggerDisplayScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","aria.tools.logger.LoggerDisplayScript","aria.widgets.action.Button","aria.utils.String","aria.widgets.Template","aria.core.TplClassLoader"],$prototype:{macro_main:function(){try{with(this){this.__$write('\n\n<div style="padding: 10px;">\n\n<div style="text-align:center; padding:5px; background:#F3F3F3; border:solid 1px #DDDDDD; margin-bottom:10px;">\n',9),this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Clean",onclick:{fn:moduleCtrl.clean,scope:moduleCtrl}},13),this.__$write('\n</div>\n\n<table style="width:100%" cellpadding="3" cellspacing="0">\n<thead>\n<tr style="color:white; border-bottom:solid 1px #444444; font-weight:bold;">\n<th style="border-right:solid 1px white; width:3em;"></th>\n<th style="background:#444;border-right:solid 1px white; width:10em;">Class Name</th>\n<th style="background:#444;border-right:solid 1px white; width:7em;">Message Id</th>\n<th style="background:#444;border-right:solid 1px white;">Message</th>\n<th style="background:#444;">Data</th>\n</tr>\n</thead>\n\n<tbody>\n',20);var __v_1=data.logs;void 0==data.logs&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",34]);for(var log_ct=0,__v_2=__v_1.length,log_index=0;__v_2>log_index;log_index++){var log=__v_1[log_index];log_ct++,this.__$write('\n<tr style="background:\n',35),log.type==aria.core.Log.LEVEL_DEBUG&&this.__$write("#DDDDDD",36),log.type==aria.core.Log.LEVEL_INFO&&this.__$write("#AADDFF",37),log.type==aria.core.Log.LEVEL_WARN&&this.__$write("#FFDD44",38),log.type==aria.core.Log.LEVEL_ERROR&&this.__$write("#FF6666",39),this.__$write('\n">\n<td style="border-right:solid 1px white; text-align:middle; border-top:solid 1px #444444;">\n',40),this.__$write(this.$modifier("escapeforhtml",[log.date]),42),this.__$write('\n</td>\n<td style="border-right:solid 1px white; border-top:solid 1px #444444;">\n',43),this.__$write(this.$modifier("escapeforhtml",[log.className]),45),this.__$write('\n</td>\n<td style="border-right:solid 1px white; border-top:solid 1px #444444;">\n',46),this.__$write(this.$modifier("escapeForHTML",[this.$modifier("empty",[log.msgId,"&nbsp;"]),!1]),48),this.__$write('\n</td>\n<td style="border-right:solid 1px white; border-top:solid 1px #444444;">\n',49),this.__$write(this.$modifier("escapeForHTML",[this.$modifier("empty",[log.msg,"&nbsp;"]),!1]),51),this.__$write('\n</td >\n<td style="border-top:solid 1px #444444;">\n',52),log.object?this.__$processWidgetMarkup("aria.widgets.AriaLib","Template",{defaultTemplate:"aria.tools.common.ObjectTreeDisplay",data:{content:log.object,title:"data",showDepth:0}},55):this.__$write("\n&nbsp;\n",64),this.__$write("\n</td>\n</tr>\n",66)}this.__$write("\n</tbody>\n\n</table>\n\n</div>\n\n\n",69)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(aria.tools.logger.LoggerDisplayScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:aria/tools/logger/LoggerDisplayScript.js
//*******************
var e=require("../../Aria");module.exports=e.tplScriptDefinition({$classpath:"aria.tools.logger.LoggerDisplayScript",$prototype:{onModuleEvent:function(){this.$refresh()}}});
//*******************
//LOGICAL-PATH:aria/tools/logger/LoggerModule.js
//*******************
var e=require("../../Aria"),t=require("../../utils/Date");require("./LoggerDisplay.tpl");var i=require("./ILoggerModule"),r=require("../../templates/ModuleCtrl"),s=require("../../core/Log");module.exports=e.classDefinition({$classpath:"aria.tools.logger.LoggerModule",$extends:r,$implements:[i],$constructor:function(){this.$ModuleCtrl.constructor.call(this),this.bridge=null,this._data={logs:[]},this.logsMaxLength=20},$destructor:function(){this.bridge.getAriaPackage().core.Log.removeAppender(this),this.$ModuleCtrl.$destructor.call(this)},$prototype:{$publicInterfaceName:"aria.tools.logger.ILoggerModule",init:function(e,t){this.bridge=e.bridge,this.$assert(77,!!this.bridge),this.bridge.getAria().load({classes:["aria.core.Log"],oncomplete:{fn:function(){this.bridge.getAriaPackage().core.Log.addAppender(this),this.$callback(t)},scope:this}})},debug:function(e,t,i,r){this._log(s.LEVEL_DEBUG,e,t,i,r)},info:function(e,t,i,r){this._log(s.LEVEL_INFO,e,t,i,r)},warn:function(e,t,i,r){this._log(s.LEVEL_WARN,e,t,i,r)},error:function(e,t,i,r){this._log(s.LEVEL_ERROR,e,t,i,r)},_log:function(e,i,r,s,a){var n=this._data.logs,o=n.unshift({type:e,className:i,msg:r,msgId:s,object:a,date:t.format(new Date,"HH:mm:ss")});o>this.logsMaxLength&&n.pop(),this.$raiseEvent("newLog")},clean:function(){this._data.logs=[],this.$raiseEvent("newLog")}}});
//*******************
//LOGICAL-PATH:aria/tools/contextual/ContextualDisplay.tpl
//*******************
Aria.classDefinition({$classpath:"aria.tools.contextual.ContextualDisplay",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$ContextualDisplayScript.constructor.call(this)},$destructor:function(){this.$ContextualDisplayScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","aria.tools.contextual.ContextualDisplayScript","aria.widgets.container.Div","aria.utils.String","aria.widgets.action.Button","aria.core.TplClassLoader"],$prototype:{macro_main:function(){try{with(this)this.__$beginContainerWidget("aria.widgets.AriaLib","Div",{sclass:"dropdown"},8)&&(this.__$write('\n<div style="padding:5px;">\n<table cellpadding="0" cellspacing="5">\n<tr>\n<td align="right">Template:</td>\n<td><strong>',11),this.__$write(this.$modifier("escapeforhtml",[data.templateCtxt.tplClasspath]),15),this.__$write("</strong></td>\n</tr>\n",15),data.templateCtxt.moduleCtrlPrivate&&(this.__$write('\n<tr>\n<td align="right">Module Controller:</td>\n<td><strong>',18),this.__$write(this.$modifier("escapeforhtml",[data.templateCtxt.moduleCtrlPrivate.$classpath]),20),this.__$write("</strong></td>\n</tr>\n",20)),this.__$write('\n</table>\n<div style="text-align:center; padding:5px; background:#F3F3F3; border:solid 1px #DDDDDD;">\n',23),this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Reload Template",onclick:"reloadTemplate"},25),aria.templates.ModuleCtrlFactory.isModuleCtrlReloadable(data.templateCtxt.moduleCtrlPrivate)&&this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Reload Module",onclick:"reloadModule"},27),this.__$processWidgetMarkup("aria.widgets.AriaLib","Button",{label:"Debug Tools",onclick:"openDebug"},29),this.__$write("\n</div>\n</div>\n\n",30),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(aria.tools.contextual.ContextualDisplayScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:aria/tools/contextual/ContextualDisplayScript.js
//*******************
var e=require("../../Aria");module.exports=e.tplScriptDefinition({$classpath:"aria.tools.contextual.ContextualDisplayScript",$prototype:{openDebug:function(){var e=this.data.driver;e.openTools()},reloadTemplate:function(){this.data.templateCtxt.$reload(),this.data.driver.close()},reloadModule:function(){aria.templates.ModuleCtrlFactory.reloadModuleCtrl(this.data.templateCtxt.moduleCtrlPrivate),this.data.driver.close()}}});
//*******************
//LOGICAL-PATH:aria/tools/contextual/IContextualMenu.js
//*******************
var e=require("../../Aria");module.exports=e.interfaceDefinition({$classpath:"aria.tools.contextual.IContextualMenu",$interface:{close:"Function",open:"Function",openTools:"Function"}});
//*******************
//LOGICAL-PATH:aria/tools/contextual/ContextualMenu.js
//*******************
var e=require("../../Aria"),t=require("../../utils/Event"),i=require("../../DomEvent"),r=require("../../templates/TemplateCtxtManager"),s=require("../../popups/Popup"),a=require("../../widgets/Template"),n=require("../../utils/Dom"),o=require("./environment/ContextualMenu"),l=require("../../utils/AriaWindow"),c=require("./IContextualMenu"),h=require("../../core/Browser"),u=require("../../core/environment/Environment");!function(){var p=null,d=null,_=null,g=null;module.exports=e.classDefinition({$classpath:"aria.tools.contextual.ContextualMenu",$singleton:!0,$implements:[c],$constructor:function(){p=t,d=r,_=o,g=n,this._enabled=!1,this._popup=null,this.targetTemplateCtxt=null,this._appEnvCfg=null,_.$on({environmentChanged:this._environmentChanged,scope:this}),this._environmentChanged(),l.$on({attachWindow:this._attachWindow,detachWindow:this._detachWindow,scope:this})},$destructor:function(){u.$unregisterListeners(this),l.$unregisterListeners(this),this._setEnabled(!1),this._popup&&this._popup.close(),this.targetTemplateCtxt=null},$prototype:{_attachWindow:function(){var e=_.getContextualMenu();this._setEnabled(e.enabled)},_detachWindow:function(){this._setEnabled(!1)},_environmentChanged:function(){var e=_.getContextualMenu();this._appEnvCfg=e,this._setEnabled(e.enabled)},_setEnabled:function(t){var i=e.$window.document;t?aria.widgets&&aria.widgets.AriaSkin&&(this._enabled=!0,p.addListener(i,"contextmenu",{fn:this._onContextMenu,scope:this}),h.isSafari&&p.addListener(i,"mouseup",{fn:this._onSafariMouseUp,scope:this})):(this._enabled=!1,p.removeListener(i,"contextmenu",{fn:this._onContextMenu}),h.isSafari&&p.removeListener(i,"mouseup",{fn:this._onSafariMouseUp}))},_onSafariMouseUp:function(e){this._safariCtrlKey=e.ctrlKey},_onContextMenu:function(e){if(this._enabled){if(e=new i(e),h.isSafari&&(e.ctrlKey=this._safariCtrlKey),e.ctrlKey){e.stopPropagation(),e.preventDefault();var t=e.target;return this.__callContextualMenu(t,e.clientX,e.clientY),e.$dispose(),!1}e.$dispose()}},open:function(e,t){this._popup&&aria.tools.contextual.ContextualMenu.close();var i={};return i=t?t:e.$TemplateCtxt?{x:0,y:0}:g.getGeometry(e),e.$TemplateCtxt?void this._notifyFound(e,i.x,i.y):(this.__callContextualMenu(e,i.x,i.y),!1)},__callContextualMenu:function(t,i,r){for(var s,a=e.$window.document.body;t&&t!=a&&!t.__template;)s=t,t=t.parentNode;if(t==a&&s){if(aria.popups&&aria.popups.PopupManager){var n=aria.popups.PopupManager.getPopupFromDom(s);n&&n.section&&n.section.tplCtxt&&this._notifyFound(n.section.tplCtxt,i,r)}}else t&&t!=a&&this._notifyFound(d.getFromDom(t.parentNode),i,r)},_afterClose:function(){this._popup&&(this._popup.$dispose(),this._popup=null)},_notifyFound:function(e,t,i){var r=aria.tools.ToolsBridge;if(r&&r.isOpen&&r.$raiseEvent({name:"forwardEvent",event:{name:"ContextualTargetFound",templateCtxt:e}}),!this._popup){var n=new s;this._popup=n,n.$on({onAfterClose:this._afterClose,scope:this});var o=e.createSection({fn:function(t){var i=new a({defaultTemplate:this._appEnvCfg.template,moduleCtrl:{classpath:this._appEnvCfg.moduleCtrl,initArgs:{templateCtxt:e.$interface("aria.templates.ITemplateCtxt"),driver:this.$interface("aria.tools.contextual.IContextualMenu")}}},e,"NOLINE");t.registerBehavior(i),i.writeMarkup(t)},scope:this});n.open({section:o,absolutePosition:{top:i,left:t},modal:!0,maskCssClass:"xDialogMask",preferredPositions:[{reference:"bottom left",popup:"top left"},{reference:"bottom left",popup:"top right"}],offset:{top:0,left:0},closeOnMouseClick:!0,closeOnMouseScroll:!0}),this.targetTemplateCtxt=e}},close:function(){this.targetTemplateCtxt=null,this._popup&&this._popup.close()},openTools:function(){aria.tools.ToolsBridge&&aria.tools.ToolsBridge.isOpen||e.load({classes:["aria.tools.ToolsBridge"],oncomplete:function(){aria.tools.ToolsBridge.open(),aria.tools.contextual.ContextualMenu.close()}})}}})}();
//*******************
//LOGICAL-PATH:aria/tools/contextual/ContextualModule.js
//*******************
var e=require("../../Aria"),t=require("../../templates/ModuleCtrl");module.exports=e.classDefinition({$classpath:"aria.tools.contextual.ContextualModule",$extends:t,$constructor:function(){this.$ModuleCtrl.constructor.call(this)},$prototype:{init:function(e,t){this._data=e,this.$callback(t)}}});
//*******************
//LOGICAL-PATH:aria/tools/IToolsModule.js
//*******************
var e=require("../Aria"),t=require("../templates/IModuleCtrl");module.exports=e.interfaceDefinition({$classpath:"aria.tools.IToolsModule",$extends:t,$interface:{subModulesList:[]},$events:{bridgeReady:"",modulesReady:""}});
//*******************
//LOGICAL-PATH:aria/tools/ToolsBridge.js
//*******************
var e=require("../Aria"),t=require("../utils/Bridge");module.exports=e.classDefinition({$classpath:"aria.tools.ToolsBridge",$extends:t,$singleton:!0,$constructor:function(){this.$Bridge.constructor.call(this)},$prototype:{open:function(){return this.$Bridge.open.call(this,{moduleCtrlClasspath:"aria.tools.ToolsModule",displayClasspath:"aria.tools.ToolsDisplay",title:"Tools"})}}});
//*******************
//LOGICAL-PATH:aria/tools/ToolsDisplay.tpl
//*******************
Aria.classDefinition({$classpath:"aria.tools.ToolsDisplay",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$ToolsDisplayScript.constructor.call(this)},$destructor:function(){this.$ToolsDisplayScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","aria.tools.ToolsDisplayScript","aria.utils.String","aria.widgets.Template","aria.core.TplClassLoader"],$prototype:{macro_main:function(){try{with(this){this.__$write('\n\n\n\n<div style="width:',10),this.__$write(this.$modifier("escapeforhtml",[$hdim(790,1)]),13),this.__$write('px; padding:5px 5px 0px 5px; background:#444444;">\n',13);var __v_1=moduleCtrl.subModulesList;void 0==moduleCtrl.subModulesList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",14]);for(var view_ct=0,__v_2=__v_1.length,view_index=0;__v_2>view_index;view_index++){var view=__v_1[view_index];view_ct++;var refpath=view.refpath;moduleCtrl[refpath]&&(this.__$write('\n<span style="cursor:pointer; display:inline-block; font-weight:bold; padding:2px 5px; border-left:solid 1px black; border-right:solid 1px black; border-top:solid 1px black;\n',17),view["view:selected"]?this.__$write("\nbackground:white; color:black; border-bottom:solid 1px white;\n",19):this.__$write("\nbackground:grey; color:white; border-bottom:solid 1px #444444;\n",21),this.__$write('\n" ',23),this.__$statementOnEvent("click",this.$normCallback({fn:selectTab,args:refpath}),23),this.__$write(">",23),this.__$write(this.$modifier("escapeforhtml",[this.$modifier("capitalize",[refpath])]),23),this.__$write("</span>\n",23))}this.__$write("\n</div>\n\n",26);var __v_3=moduleCtrl.subModulesList;void 0==moduleCtrl.subModulesList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",28]);for(var view_ct=0,__v_4=__v_3.length,view_index=0;__v_4>view_index;view_index++){var view=__v_3[view_index];view_ct++;var refpath=view.refpath;view["view:selected"]&&moduleCtrl[refpath]&&this.__$processWidgetMarkup("aria.widgets.AriaLib","Template",{defaultTemplate:view.display,moduleCtrl:moduleCtrl[refpath],width:$hdim(800,1)},31)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={min:800},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(aria.tools.ToolsDisplayScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:aria/tools/ToolsDisplayScript.js
//*******************
var e=require("../Aria");module.exports=e.tplScriptDefinition({$classpath:"aria.tools.ToolsDisplayScript",$prototype:{$dataReady:function(){this.moduleCtrl.subModulesList.length>0&&(this.moduleCtrl.subModulesList[0]["view:selected"]=!0)},onModuleEvent:function(){this.$refresh()},selectTab:function(e,t){for(var i=this.moduleCtrl.subModulesList,r=0,s=i.length;s>r;r++)i[r]["view:selected"]=i[r].refpath==t?!0:!1;this.$refresh()}}});
//*******************
//LOGICAL-PATH:aria/tools/ToolsModule.js
//*******************
var e=require("../Aria"),t=require("./IToolsModule"),i=require("../templates/ModuleCtrl");module.exports=e.classDefinition({$classpath:"aria.tools.ToolsModule",$extends:i,$implements:[t],$constructor:function(){this.subModulesList=[{refpath:"inspector",classpath:"aria.tools.inspector.InspectorModule",display:"aria.tools.inspector.InspectorDisplay"},{refpath:"logger",classpath:"aria.tools.logger.LoggerModule",display:"aria.tools.logger.LoggerDisplay"}],this.bridge=null,this.$ModuleCtrl.constructor.call(this)},$prototype:{$publicInterfaceName:"aria.tools.IToolsModule",init:function(e,t){this.bridge=e.bridge;for(var i=0,r=this.subModulesList.length;r>i;i++)this.subModulesList[i].initArgs||(this.subModulesList[i].initArgs={},this.subModulesList[i].initArgs.bridge=this.bridge);this.loadSubModules(this.subModulesList,{fn:this.onSubModulesReady,scope:this}),this.$ModuleCtrl.init.call(this,e,t)},onSubModulesReady:function(){this.$raiseEvent("modulesReady")},onSubModuleEvent:function(){}}});